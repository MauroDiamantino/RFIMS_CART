\hypertarget{Basics_8h}{}\section{/home/new-\/mauro/eclipse-\/cdt/workspace/\+R\+F\+I\+M\+S\+\_\+\+C\+A\+R\+T/src/\+Basics.h File Reference}
\label{Basics_8h}\index{/home/new-\/mauro/eclipse-\/cdt/workspace/\+R\+F\+I\+M\+S\+\_\+\+C\+A\+R\+T/src/\+Basics.\+h@{/home/new-\/mauro/eclipse-\/cdt/workspace/\+R\+F\+I\+M\+S\+\_\+\+C\+A\+R\+T/src/\+Basics.\+h}}


This header file contains the declarations of the most basic and global entities which are used by many others entities.  


{\ttfamily \#include $<$iostream$>$}\newline
{\ttfamily \#include $<$exception$>$}\newline
{\ttfamily \#include $<$vector$>$}\newline
{\ttfamily \#include $<$string$>$}\newline
{\ttfamily \#include $<$sstream$>$}\newline
{\ttfamily \#include $<$iomanip$>$}\newline
{\ttfamily \#include $<$boost/algorithm/string.\+hpp$>$}\newline
{\ttfamily \#include $<$boost/filesystem.\+hpp$>$}\newline
{\ttfamily \#include $<$boost/date\+\_\+time/gregorian/gregorian.\+hpp$>$}\newline
{\ttfamily \#include $<$cmath$>$}\newline
{\ttfamily \#include $<$fstream$>$}\newline
{\ttfamily \#include $<$unistd.\+h$>$}\newline
{\ttfamily \#include $<$cstdint$>$}\newline
{\ttfamily \#include $<$cstdlib$>$}\newline
{\ttfamily \#include $<$pthread.\+h$>$}\newline
{\ttfamily \#include $<$algorithm$>$}\newline
{\ttfamily \#include $<$wiring\+Pi.\+h$>$}\newline
Include dependency graph for Basics.\+h\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{Basics_8h__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{Basics_8h__dep__incl}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classrfims__exception}{rfims\+\_\+exception}
\begin{DoxyCompactList}\small\item\em A class derived from standard class {\ttfamily std\+::exception}. \end{DoxyCompactList}\item 
struct \hyperlink{structTimeData}{Time\+Data}
\begin{DoxyCompactList}\small\item\em This structure is intended to store data related to {\itshape date} and {\itshape time} and to perform some operations with that data. \end{DoxyCompactList}\item 
struct \hyperlink{structFreqValues}{Freq\+Values}
\begin{DoxyCompactList}\small\item\em The aim of this structure is to store the curve of a determined parameter or variable versus the frequency, which is named a frequency curve here. \end{DoxyCompactList}\item 
struct \hyperlink{structSweep}{Sweep}
\begin{DoxyCompactList}\small\item\em The aim of this structure is to store the data points of a sweep obtained with the spectrum analyzer in a determined azimuth position, with a specific polarization. \end{DoxyCompactList}\item 
struct \hyperlink{structRFI}{R\+FI}
\begin{DoxyCompactList}\small\item\em The aim of this structure is to store the data related with the detected RF interference (\hyperlink{structRFI}{R\+FI})\+: frequency, power, azimuth angle, polarization, time, reference norm, etc. \end{DoxyCompactList}\item 
struct \hyperlink{structBandParameters}{Band\+Parameters}
\begin{DoxyCompactList}\small\item\em This structure is intended to store the parameters which are used to configure the spectrum analyzer in each frequency band. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{Basics_8h_ab0cf00620947abc90fbfe36db36f8fc7}{approximately\+Equal} (float a, float b)
\begin{DoxyCompactList}\small\item\em Function intended to compare floating-\/point numbers as approximately equal, taking into account the floating-\/point rounding errors. \end{DoxyCompactList}\item 
bool \hyperlink{Basics_8h_adee734e43e4a9a5f4b9f610ccdd3f8e0}{approximately\+Equal} (std\+::vector$<$ float $>$ vectorA, std\+::vector$<$ float $>$ vectorB)
\begin{DoxyCompactList}\small\item\em Function intended to compare {\ttfamily std\+::vector$<$float$>$} containers as approximately equal, taking into account the floating-\/point rounding errors. \end{DoxyCompactList}\item 
std\+::vector$<$ Freq\+Values\+::value\+\_\+type $>$ \hyperlink{Basics_8h_a8f56d4e90764072380d4303d96fe6879}{operator-\/} (const std\+::vector$<$ Freq\+Values\+::value\+\_\+type $>$ \&\hyperlink{Spectran_8h_a16fa8eb91a19fde7a399d85c521f63fd}{vect})
\begin{DoxyCompactList}\small\item\em An overloading of unary operator -\/ which negates the elements of a {\ttfamily std\+::vector$<$float$>$} container. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{Basics_8h_ae8242aec445329b2023609afe53abf99}\label{Basics_8h_ae8242aec445329b2023609afe53abf99}} 
void \hyperlink{Basics_8h_ae8242aec445329b2023609afe53abf99}{Wait\+For\+Enter} ()
\begin{DoxyCompactList}\small\item\em This function stop the execution until any key is pressed by the user and it was used for debugging purpose. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{Basics_8h_adb434b11769fc3a9acd409f2fe534395}\label{Basics_8h_adb434b11769fc3a9acd409f2fe534395}} 
void \hyperlink{Basics_8h_adb434b11769fc3a9acd409f2fe534395}{Initialize\+G\+P\+IO} ()
\begin{DoxyCompactList}\small\item\em This function initializes all G\+P\+IO pins which are used for the input and output signals, in the way it is described in structure {\itshape pi\+Pins}. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{Basics_8h_a37d643c013d8e020715ec625553673e7}\label{Basics_8h_a37d643c013d8e020715ec625553673e7}} 
void \hyperlink{Basics_8h_a37d643c013d8e020715ec625553673e7}{Turn\+Off\+Leds} ()
\begin{DoxyCompactList}\small\item\em The aim of this function is to turn all L\+E\+Ds off. \end{DoxyCompactList}\item 
void \hyperlink{Basics_8h_a2f7418278fcdac50f5c6a73744f8013c}{Turn\+On\+Front\+End} ()
\begin{DoxyCompactList}\small\item\em The aim of this function is to turn on the RF front-\/end elements in a sequential manner, from the spectrum analyzer to the antenna.. \end{DoxyCompactList}\item 
void \hyperlink{Basics_8h_a5ffe8b7dfe9c6702ed65b2b8b47bc3e1}{Turn\+Off\+Front\+End} ()
\begin{DoxyCompactList}\small\item\em The aim of this function is to turn off the RF front-\/end elements in a sequential manner, from the antenna to the spectrum analyzer. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{Basics_8h_a0423f4cb393331ce0b9f6b3a43adcaae}\label{Basics_8h_a0423f4cb393331ce0b9f6b3a43adcaae}} 
const std\+::string \hyperlink{Basics_8h_a0423f4cb393331ce0b9f6b3a43adcaae}{B\+A\+S\+E\+\_\+\+P\+A\+TH} = \char`\"{}/home/pi/R\+F\+I\+MS-\/C\+A\+RT\char`\"{}
\begin{DoxyCompactList}\small\item\em This constant define the base path where there are the files and folders used by the software. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{Basics_8h_a1c3522c6627edfbe8f9bd33aeb45b8c2}\label{Basics_8h_a1c3522c6627edfbe8f9bd33aeb45b8c2}} 
\begin{tabbing}
xx\=xx\=xx\=xx\=xx\=xx\=xx\=xx\=xx\=\kill
struct \{\\
\>const unsigned int \hyperlink{Basics_8h_a88cf59242b5a2ace3d90704ab4d2bcda}{SWITCH} = 10\\
\>\>{\em This pin is initialized as an output in LOW state, so the RF switch output will start connected to the noise source. }\\
\>const unsigned int \hyperlink{Basics_8h_ac49574191d7b969a384f488bf156f074}{NOISE\_SOURCE} = 6\\
\>\>{\em This pin is initialized as an output in LOW state, so the noise source will start turned off. }\\
\>const unsigned int \hyperlink{Basics_8h_a3082ce7a3469a197735f0df330c1db7f}{LNAS} = 26\\
\>\>{\em This pin is initialized as an output in LOW state, so the LNAs will start turned off. }\\
\>const unsigned int \hyperlink{Basics_8h_a237073109a5bfa275095a6997d994c39}{SPECTRAN} = 27\\
\>\>{\em This pin is initialized as an input with the pull-\/down resistor enabled, so the Spectran device will start turned off. }\\
\>const unsigned int \hyperlink{Basics_8h_a1f3aea83acb94fb9385c520e133172cc}{LED\_SWEEP\_CAPTURE} = 0\\
\>\>{\em This pin is initialized as an output in LOW state, so the led will start turned off. }\\
\>const unsigned int \hyperlink{Basics_8h_ad2b6181fa6a423c60c574fa713cbe6cd}{LED\_SWEEP\_PROCESS} = 2\\
\>\>{\em This pin is initialized as an output in LOW state, so the led will start turned off. }\\
\>const unsigned int \hyperlink{Basics_8h_a2b7714e3fe4c2724a3954fedefe07d39}{LED\_INIT\_POS} = 12\\
\>\>{\em This pin is initialized as an output in LOW state, so the led will start turned off. }\\
\>const unsigned int \hyperlink{Basics_8h_af304626609da54cf58c8e0a46dac817c}{LED\_NEXT\_POS} = 12\\
\>\>{\em This pin is initialized as an output in LOW state, so the led will start turned off. }\\
\>const unsigned int \hyperlink{Basics_8h_a916b908a0652e7d442ecf8f1383a6b5f}{LED\_POLARIZ} = 3\\
\>\>{\em This pin is initialized as an output in LOW state, so the led will start turned off. }\\
\>const unsigned int {\bfseries LED\_ERROR} = 13\\
\>const unsigned int \hyperlink{Basics_8h_a95f3adabd348cd13ff295c9edce98d38}{BUTTON\_ENTER} = 8\\
\>\>{\em This pin is initialized as in input wit the pull-\/up resistor enabled, so the button must connect the pin to GND. }\\
\>const unsigned int {\bfseries PUL} = 28\\
\>const unsigned int {\bfseries DIRECCION} = 31\\
\>const unsigned int {\bfseries EN} = 29\\
\>const unsigned int {\bfseries SENSOR\_NORTE} = 30\\
\>const unsigned int {\bfseries POL} = 5\\
\>const unsigned int {\bfseries FASE\_A} = 22\\
\>const unsigned int {\bfseries FASE\_B} = 21\\
\} \hyperlink{Basics_8h_a1c3522c6627edfbe8f9bd33aeb45b8c2}{piPins}\\

\end{tabbing}\begin{DoxyCompactList}\small\item\em This structure is intended to store the assignment of G\+P\+IO pins to input and output external signals, taking into account the Wiring Pi numbering. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{Basics_8h_a4a254aed33fe8517a018a3721a50c277}\label{Basics_8h_a4a254aed33fe8517a018a3721a50c277}} 
\begin{tabbing}
xx\=xx\=xx\=xx\=xx\=xx\=xx\=xx\=xx\=\kill
struct \{\\
\>const int \hyperlink{Basics_8h_adb83e5ae147752bdfbfec131998b1b41}{SWITCH\_TO\_NS} = HIGH\\
\>\>{\em This constant define the value the switch\textquotesingle{}s pin must take to connect noise source to input, provided that the noise source is connected to switch\textquotesingle{}s J2 connector. }\\
\>const int \hyperlink{Basics_8h_a443faa6e8379fdc77c7ea27ea8dca056}{SWITCH\_TO\_ANT} = !\hyperlink{Basics_8h_adb83e5ae147752bdfbfec131998b1b41}{SWITCH\_TO\_NS}\\
\>\>{\em This constant define the value the switch\textquotesingle{}s pin must take to connect antenna to input, provided that the antenna is connected to switch\textquotesingle{}s J1 connector. }\\
\>const int {\bfseries NS\_ON} = HIGH\\
\>const int {\bfseries NS\_OFF} = !NS\_ON\\
\>const int {\bfseries LNAS\_ON} = HIGH\\
\>const int {\bfseries LNAS\_OFF} = !LNAS\_ON\\
\>const int {\bfseries SPECTRAN\_ON} = HIGH\\
\>const int {\bfseries SPECTRAN\_OFF} = !SPECTRAN\_ON\\
\>const int {\bfseries LED\_SWP\_CAPT\_ON} = HIGH\\
\>const int {\bfseries LED\_SWP\_CAPT\_OFF} = !LED\_SWP\_CAPT\_ON\\
\>const int {\bfseries LED\_SWP\_PROC\_ON} = HIGH\\
\>const int {\bfseries LED\_SWP\_PROC\_OFF} = !LED\_SWP\_PROC\_ON\\
\>const int {\bfseries LED\_INIT\_POS\_ON} = HIGH\\
\>const int {\bfseries LED\_INIT\_POS\_OFF} = !LED\_INIT\_POS\_ON\\
\>const int {\bfseries LED\_NEXT\_POS\_ON} = HIGH\\
\>const int {\bfseries LED\_NEXT\_POS\_OFF} = !LED\_NEXT\_POS\_ON\\
\>const int {\bfseries LED\_POL\_ON} = HIGH\\
\>const int {\bfseries LED\_POL\_OFF} = !LED\_POL\_ON\\
\>const int {\bfseries LED\_ERROR\_ON} = HIGH\\
\>const int {\bfseries LED\_ERROR\_OFF} = !LED\_ERROR\_ON\\
\>const int {\bfseries BUTTON\_ON} = LOW\\
\>const int {\bfseries BUTTON\_OFF} = !BUTTON\_ON\\
\>const int {\bfseries PUL\_ON} = HIGH\\
\>const int {\bfseries PUL\_OFF} = !PUL\_ON\\
\>const int {\bfseries DIR\_ANTIHOR} = HIGH\\
\>const int {\bfseries DIR\_HOR} = !DIR\_ANTIHOR\\
\>const int {\bfseries EN\_ON} = HIGH\\
\>const int {\bfseries EN\_OFF} = !EN\_ON\\
\>const int {\bfseries SENS\_NOR\_ON} = LOW\\
\>const int {\bfseries SENS\_NOR\_OFF} = !SENS\_NOR\_ON\\
\>const int {\bfseries POL\_HOR} = LOW\\
\>const int {\bfseries POL\_VERT} = !POL\_HOR\\
\>const int {\bfseries FASE\_A\_ON} = HIGH\\
\>const int {\bfseries FASE\_A\_OFF} = !FASE\_A\_ON\\
\>const int {\bfseries FASE\_B\_ON} = HIGH\\
\>const int {\bfseries FASE\_B\_OFF} = !FASE\_B\_ON\\
\} \hyperlink{Basics_8h_a4a254aed33fe8517a018a3721a50c277}{pinsValues}\\

\end{tabbing}\begin{DoxyCompactList}\small\item\em This structure contains the digital pins\textquotesingle{} assertive values (H\+I\+GH or L\+OW). \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
This header file contains the declarations of the most basic and global entities which are used by many others entities. 

This header file contains the declarations and definitions of the following\+:
\begin{DoxyItemize}
\item Preprocessor definitions ({\ttfamily define})\+: these elements define the blocks of code will be taking into account by the compiler, so the way the software will behave after the compilation and linking.
\item Global libraries, i.\+e. the libraries which are used by several functions and classes from different files.
\item Global constants and variables.
\item Global structures which are used to interchange data between different objects and functions.
\item Global structures which contain common data to all software\textquotesingle{}s entities.
\item A global class to handle exceptions.
\item Global functions which are used in several different places. \begin{DoxyAuthor}{Author}
Mauro Diamantino 
\end{DoxyAuthor}

\end{DoxyItemize}

\subsection{Function Documentation}
\mbox{\Hypertarget{Basics_8h_ab0cf00620947abc90fbfe36db36f8fc7}\label{Basics_8h_ab0cf00620947abc90fbfe36db36f8fc7}} 
\index{Basics.\+h@{Basics.\+h}!approximately\+Equal@{approximately\+Equal}}
\index{approximately\+Equal@{approximately\+Equal}!Basics.\+h@{Basics.\+h}}
\subsubsection{\texorpdfstring{approximately\+Equal()}{approximatelyEqual()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily bool approximately\+Equal (\begin{DoxyParamCaption}\item[{float}]{a,  }\item[{float}]{b }\end{DoxyParamCaption})}



Function intended to compare floating-\/point numbers as approximately equal, taking into account the floating-\/point rounding errors. 

This function was copied from this \href{https://www.learncpp.com/cpp-tutorial/35-relational-operators-comparisons/}{\tt link}, but it was modified. It is based in the Knuth’s algorithm but it uses two epsilons, an absolute epsilon (A\+B\+S\+\_\+\+E\+P\+S\+I\+L\+ON) which is very small and is intended to compare near-\/zero floating-\/point numbers and a relative epsilon (R\+E\+L\+\_\+\+E\+P\+S\+I\+L\+ON, which is a percentage of the biggest operand) to compare the rest of the floating-\/point numbers. The function returns true if the difference between a and b is less than A\+B\+S\+\_\+\+E\+P\+S\+I\+L\+ON, or within R\+E\+L\+\_\+\+E\+P\+S\+I\+L\+ON percent of the larger of a and b. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em a} & The left-\/hand side argument. \\
\hline
\mbox{\tt in}  & {\em b} & The right-\/hand side argument. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{Basics_8h_adee734e43e4a9a5f4b9f610ccdd3f8e0}\label{Basics_8h_adee734e43e4a9a5f4b9f610ccdd3f8e0}} 
\index{Basics.\+h@{Basics.\+h}!approximately\+Equal@{approximately\+Equal}}
\index{approximately\+Equal@{approximately\+Equal}!Basics.\+h@{Basics.\+h}}
\subsubsection{\texorpdfstring{approximately\+Equal()}{approximatelyEqual()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily bool approximately\+Equal (\begin{DoxyParamCaption}\item[{std\+::vector$<$ float $>$}]{vectorA,  }\item[{std\+::vector$<$ float $>$}]{vectorB }\end{DoxyParamCaption})}



Function intended to compare {\ttfamily std\+::vector$<$float$>$} containers as approximately equal, taking into account the floating-\/point rounding errors. 

This function is based on the function presented in this \href{https://www.learncpp.com/cpp-tutorial/35-relational-operators-comparisons/}{\tt link}.

It is based in the Knuth’s algorithm but it uses two epsilons, an absolute epsilon (A\+B\+S\+\_\+\+E\+P\+S\+I\+L\+ON) which is very small and is intended to compare near-\/zero floating-\/point numbers and a relative epsilon (R\+E\+L\+\_\+\+E\+P\+S\+I\+L\+ON, which is a percentage of the biggest operand) to compare the rest of the floating-\/point numbers. The function returns true if the difference between a and b is less than A\+B\+S\+\_\+\+E\+P\+S\+I\+L\+ON, or within R\+E\+L\+\_\+\+E\+P\+S\+I\+L\+ON percent of the larger of a and b. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em vectorA} & The left-\/hand side argument. \\
\hline
\mbox{\tt in}  & {\em vectorB} & The right-\/hand side argument. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{Basics_8h_a8f56d4e90764072380d4303d96fe6879}\label{Basics_8h_a8f56d4e90764072380d4303d96fe6879}} 
\index{Basics.\+h@{Basics.\+h}!operator-\/@{operator-\/}}
\index{operator-\/@{operator-\/}!Basics.\+h@{Basics.\+h}}
\subsubsection{\texorpdfstring{operator-\/()}{operator-()}}
{\footnotesize\ttfamily std\+::vector$<$Freq\+Values\+::value\+\_\+type$>$ operator-\/ (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ Freq\+Values\+::value\+\_\+type $>$ \&}]{vect }\end{DoxyParamCaption})}



An overloading of unary operator -\/ which negates the elements of a {\ttfamily std\+::vector$<$float$>$} container. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em vect} & A {\ttfamily std\+::vector$<$float$>$} container which must be negated. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{Basics_8h_a5ffe8b7dfe9c6702ed65b2b8b47bc3e1}\label{Basics_8h_a5ffe8b7dfe9c6702ed65b2b8b47bc3e1}} 
\index{Basics.\+h@{Basics.\+h}!Turn\+Off\+Front\+End@{Turn\+Off\+Front\+End}}
\index{Turn\+Off\+Front\+End@{Turn\+Off\+Front\+End}!Basics.\+h@{Basics.\+h}}
\subsubsection{\texorpdfstring{Turn\+Off\+Front\+End()}{TurnOffFrontEnd()}}
{\footnotesize\ttfamily void Turn\+Off\+Front\+End (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



The aim of this function is to turn off the RF front-\/end elements in a sequential manner, from the antenna to the spectrum analyzer. 

To turn off the RF front-\/end elements sequentially, this function begins ensuring the noise source is turned off, then it switches the input to that device, it waits 1 second, it turns the L\+N\+As off, it waits again 1 second and, finally, it turns the spectrum analyzer off. \mbox{\Hypertarget{Basics_8h_a2f7418278fcdac50f5c6a73744f8013c}\label{Basics_8h_a2f7418278fcdac50f5c6a73744f8013c}} 
\index{Basics.\+h@{Basics.\+h}!Turn\+On\+Front\+End@{Turn\+On\+Front\+End}}
\index{Turn\+On\+Front\+End@{Turn\+On\+Front\+End}!Basics.\+h@{Basics.\+h}}
\subsubsection{\texorpdfstring{Turn\+On\+Front\+End()}{TurnOnFrontEnd()}}
{\footnotesize\ttfamily void Turn\+On\+Front\+End (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



The aim of this function is to turn on the RF front-\/end elements in a sequential manner, from the spectrum analyzer to the antenna.. 

To turn on the RF front-\/end elements in a sequential manner, first, this function turns the spectrum analyzer on, then it waits 5 seconds, it turns the L\+N\+As on, it waits again but this time just 1 second and, finally, it switches the input to the antenna. 
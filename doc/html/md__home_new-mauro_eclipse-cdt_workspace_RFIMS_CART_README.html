<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RFIMS-CART: RFIMS_CART</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="CART-1_icon.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RFIMS-CART
   </div>
   <div id="projectbrief">This software was designed to capture RF power measurements from a spectrum analyzer Aaronia Spectran V4, using an antenna which could be rotated to point the horizon in different azimuth angles and whose polarization could be changed between horizontal and vertical. A sweep from 1 GHz (or maybe less) to 9.4 GHz is captured in each antenna position and then it is calibrated, it is processed to identify RF interference (RFI), it is saved into memory, it is plotted with the detected RFI and finally the measurements are sent to a remote server.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">RFIMS_CART </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>/////////////////////////////////////////////////////////////////////ENGLISH/////////////////////////////////////////////////////////////////////////</p>
<p>This software is intended to run in the "RF Interference Measurement System (RFIMS)" which is going to be installed beside the China-Argentina Radio Telescope (CART) to analize the RF interference (<a class="el" href="structRFI.html" title="The aim of this structure is to store the data related with the detected RF interference (RFI): frequ...">RFI</a>) which could reach the telescope, taking into account different azimuth angles and two antenna polarizations, horizontal and vertical.</p>
<p>It was designed to capture RF power measurements from a spectrum analyzer Aaronia Spectran HF-60105 V4 X, using an antenna which is mounted on a structure that allow the antenna to be rotated to point the horizon with different azimuth angles and whose polarization could be changed between horizontal and vertical. A sweep from 1 GHz (or maybe less) to 9.4 GHz is captured in each antenna position and then it is calibrated, processed to identify the <a class="el" href="structRFI.html" title="The aim of this structure is to store the data related with the detected RF interference (RFI): frequ...">RFI</a>, saved into memory, plotted with the detected <a class="el" href="structRFI.html" title="The aim of this structure is to store the data related with the detected RF interference (RFI): frequ...">RFI</a> and finally the measurements are sent to a remote server. The initial and stop frequencies are configurable, as many other parameters, through the files which are accesed by the software to load those parameters and which are inside the directories /home/pi/RFIMS-CART/.</p>
<p>To calibrate the measurements, at the beginning of each measurement cycle, which is the set of sweeps corresponding to a turning of 360° of the azimuth angle, a calibration of the RF front end is performed which consists in connecting a noise source (NS) at the input y an capturing two sweeps, one of them with the NS turned off and the other one with the NS turned on. With these sweeps, the curves of the front end parameters, total gain and total noise figure, versus frequency are estimated. Then, the sweeps captured with the antenna connected at the input are calibrated taking into account the estimated front end parameters, so that the distorsion produced by the front end beacuse of its no-flat frequency response, so that the power values represent the signals at the input and so that the internal noise of the front end which has been added to the measurements, to be removed.</p>
<p>The software has been designed to this particual purpose so this can only be run in a Raspberry Pi 3 board o later version with Raspbian Stretch or later, y the software will only work with the spectrum analyzer Aaronia Spectran HF-60105 V4 X and with the Aaronia GPS receiver with integrated sensors.</p>
<p>Before the installation of the software, it is necessary to install the following applications and libraries:</p>
<ul>
<li>Driver FTDI D2XX 2, versión 1.4.8 ARMv7 hard-float: <a href="https://www.ftdichip.com/Drivers/D2XX.htm">https://www.ftdichip.com/Drivers/D2XX.htm</a></li>
<li>Library libnmea: <a href="http://nmea.io/">http://nmea.io/</a></li>
<li>Library WiringPi 4, versión 2.46 o later: <a href="http://wiringpi.com/">http://wiringpi.com/</a></li>
<li>Software gnuplot 5 o later: <a href="http://www.gnuplot.info/">http://www.gnuplot.info/</a></li>
<li>The set of C++ libraries “boost” (<a href="https://www.boost.org/">https://www.boost.org/</a>), versión 1.69.0, of which the following ones were used:<ul>
<li>Library header-only Boost.Algorithm</li>
<li>Library header-only Boost.Date_Time</li>
<li>Library Boost.Filesystem</li>
<li>Library Boost.System</li>
<li>Library header-only Boost.Bimap</li>
<li>Library Boost.Timer</li>
</ul>
</li>
</ul>
<p>To compile and install the software, a terminal must be opened, the current directory must be changed to the base directory of the project and the following commands must be run: </p><pre class="fragment">make all
sudo make copy-files
</pre><p>The first instruction compiles the software and it generates the binay file ./bin/rfims-cart. The second instruction copies the previous binary file to the path /usr/local/bin/, which is inside the environment variable PATH, so that the software could be run without writing the path where the binary file is; the python scritp ./scripts/client.py, which is used by the software to upload the data, is copied to the path /usr/local/; the file ./data/99-aaronia-spectran.rules is copied to the path /etc/udev/rules.d/, which allows a non-root user to run the software; and, finally, the directory tree ./data/RFIMS-CART/, which contains several files which are accesed by the software, are copied to the path /home/pi/. These directories and files are accesed by the software to load the configuration parameters and to save there the measurements.</p>
<p>To run the software, it must be typed "rfims-cart" in a terminal. The software has several arguments which define its behavior. To know the arguments and their usage it must be typed "rfims-cart --help" or "rims-cart -h".</p>
<p>To avoid interferences produced by the Raspberry Pi itself, it is very important to disable the Wi-Fi and Bluetooth interfaces, which is done editing the file /boot/config.txt.</p>
<p>To genearate/regenerate the software manual, you must run the following commands in a terminal: </p><pre class="fragment">cd doc
doxygen Doxyfile
cd latex
make pdf
</pre><p>After that, the scripts "Software_manual_pdf" and "Software_manual_html", which are in the folder doc/, will allow you to access the corresponding files.</p>
<p>///////////////////////////////////////////////////////////////////////ESPAÑOL////////////////////////////////////////////////////////////////////////////</p>
<p>Este software está pensado para ser ejecutado en el "Sistema de Monitoreo de Interferencias de RF (RFIMS)" que será instalado junto al RadioTelescopio Chino-Argentino (CART) para analizar las interferencias de RF (<a class="el" href="structRFI.html" title="The aim of this structure is to store the data related with the detected RF interference (RFI): frequ...">RFI</a>) que podrían alcanzar el telescopio, teniendo en cuenta diferentes ángulos azimutales y dos polarizaciones de la antena, horizontal y vertical.</p>
<p>El mismo está diseñado para capturar las mediciones de potencia de RF de un analizador de espectro Aaronia Spectran HF-60105 V4 X, usando una antena montada sobre una estructura que le permite rotar para apuntar al horizonte con diferentes ángulos azimutales y que le permite cambiar su polarización entre vertical y horizontal. En cada posición de la antena se captura un barrido desde 1 GHz (o quizás una menor frecuencia) hasta 9.4 GHz y luego el barrido es calibrado, procesado para identificar la <a class="el" href="structRFI.html" title="The aim of this structure is to store the data related with the detected RF interference (RFI): frequ...">RFI</a>, se almacena en memoria no volátil, es graficado en la pantalla con la <a class="el" href="structRFI.html" title="The aim of this structure is to store the data related with the detected RF interference (RFI): frequ...">RFI</a> detectada y, finalmente, todos los datos recolectados son enviados a un servidor remoto. Las frecuencias inicial y final son configurables, al igual que muchos otros parámetros, mediante los archivos a los cuales el software accede para levantar estos datos y que se ubican dentro de los directorios /home/pi/RFIMS-CART/.</p>
<p>Para calibrar las mediciones, al inicio de cada ciclo de medición, el conjunto de barridos que corresponden a un recorrido de 360° azimutal de la antena, se realiza una calibración del front end de RF que consiste en conectar un generador de ruido a la entrada y capturar dos barridos, uno con el generador apagado y otro con el generador encendido. Con estos barridos, se estiman las curvas de la ganancia total y la figura de ruido total del front end, ambas en función de la frecuencia. Luego, los barridos capturados con la antena son calibrados teniendo en cuenta los parameteros estimados anteriores, de modo que se elimine la distorsión introducida por el front end por su respuesta frecuencial no plana, las potencias estén referenciadas a la entrada del front end y de modo que se elimine el ruido interno del front end adicionado a las señales de entrada.</p>
<p>El software está diseñado para esta aplicación particular por lo que solo puede executarse en una placa Raspberry Pi 3 o superior con Raspbian Stretch o superior, y solo funcionará con el analizador de espectro Aaronia Spectran HF-60105 V4 X y con el receptor GPS con sensores integrados de Aaronia.</p>
<p>Antes de instalar este software, es necesario instalar las siguientes aplicaciones y bibliotecas:</p>
<ul>
<li>Driver FTDI D2XX 2, la versión 1.4.8 ARMv7 hard-float: <a href="https://www.ftdichip.com/Drivers/D2XX.htm">https://www.ftdichip.com/Drivers/D2XX.htm</a></li>
<li>Biblioteca libnmea: <a href="http://nmea.io/">http://nmea.io/</a></li>
<li>Biblioteca WiringPi 4, versión 2.46 o superior: <a href="http://wiringpi.com/">http://wiringpi.com/</a></li>
<li>Software gnuplot 5 o superior: <a href="http://www.gnuplot.info/">http://www.gnuplot.info/</a></li>
<li>El paquete de bibliotecas de C++ “boost” (<a href="https://www.boost.org/">https://www.boost.org/</a>), versión 1.69.0, de las que se utilizaron las siguientes:<ul>
<li>Biblioteca header-only Boost.Algorithm</li>
<li>Biblioteca header-only Boost.Date_Time</li>
<li>Biblioteca Boost.Filesystem</li>
<li>Biblioteca Boost.System</li>
<li>Biblioteca header-only Boost.Bimap</li>
<li>Biblioteca Boost.Timer</li>
</ul>
</li>
</ul>
<p>Para compilar e instalar el software se debe abrir una terminal, ubicarse sobre el directorio base del proyecto y ejecutar los siguientes comandos: </p><pre class="fragment">make all
sudo make copy-files
</pre><p>Con la primer instrucción se compila el programa y se genera el binario ./bin/rfims-cart. Con la segunda instrucción se copia el binario anterior a la ruta /usr/local/bin/, que está dentro de la variable de entorno PATH, para que se puede ejecutar el mismo sin escribir la ruta donde se encuentra; se copia el script de python ./scripts/client.py, que es usado por el programa para enviar los datos al servidor remoto, a la ruta /usr/local/; se copia el archivo con udev rules ./data/99-aaronia-spectran.rules a la ruta /etc/udev/rules.d/, que permite que un usuario no root pueda ejecutar el software; y, por último, se copia el árbol de directorios con archivos ./data/RFIMS-CART/ a /home/pi/. Estos directorios y archivos son utilizados por el programa para cargar los parámetros de configuración y para almacenar las mediciones y datos capturados.</p>
<p>Para ejecutar el programa se debe tipear "rfims-cart" en la terminal. El programa tiene multiples argumentos que permiten modificar su comportamiento. Para conocer los argumentos y cómo deben usarse, se debe tipear "rfims-cart --help" o "rfims-cart -h".</p>
<p>Para evitar interferencias producidas por la misma placa Raspberry Pi, resulta trascendental desactivar las interfaces Wi-Fi y Bluetooth, lo cual se realiza modificando el archivo /boot/config.txt.</p>
<p>Para generar/regenerar el manual del software, ejecutar en una terminal los siguientes comandos: </p><pre class="fragment">cd doc
doxygen Doxyfile
cd latex
make pdf
</pre><p>Luego los scripts "Software_manual_pdf" y "Software_manual_html" de la carpeta doc/ permitirán abrir los archivos correspondientes. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
